<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Para Mar ‚Ä¢ Feliz 22 üéÇ</title>
<meta name="theme-color" content="#0a2a6b">
<style>
  :root{
    --bg:#0b1220;       /* navy oscuro */
    --panel:#111a2f;
    --fg:#f6f7fb;
    --muted:#b9c2da;
    --accent:#2f6bff;   /* azul acento */
    --success:#5cf3a6;
    --danger:#ff6b88;
    --card-w:clamp(300px,92vw,560px);
    --radius:16px;
    --shadow:0 10px 28px rgba(0,0,0,.28);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background:radial-gradient(1200px 600px at 10% -10%,#14234c 0,#0b1220 45%,#0b1220 100%);
    color:var(--fg); font-family: system-ui,-apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, sans-serif;
    line-height:1.5; letter-spacing:.2px;
  }
  header{position:sticky; top:0; z-index:10; background:linear-gradient(#0b1220ee,#0b1220cc 60%,transparent); padding:14px 12px 6px}
  .hwrap{max-width:var(--card-w); margin:0 auto; display:flex; gap:12px; align-items:center; justify-content:space-between}
  .title{font-weight:700; margin:0; font-size:1rem}
  .progress{height:6px; background:#ffffff1a; border-radius:999px; overflow:hidden; flex:1; margin-left:12px}
  .bar{height:100%; width:0%; background:linear-gradient(90deg,var(--accent),#7aa5ff)}
  main{display:grid; place-items:start center; padding:24px 12px 80px}
  .card{
    width:var(--card-w); background:linear-gradient(180deg,#12204a,#0f1a36); border:1px solid #ffffff1a;
    border-radius:var(--radius); box-shadow:var(--shadow); overflow:hidden; margin:18px 0;
  }
  .media{aspect-ratio:4/5; background:#0a1330; display:grid; place-items:center}
  .media img{width:100%; height:100%; object-fit:cover; display:block}
  .content{padding:14px 14px 16px}
  .kicker{font-size:.78rem; color:var(--muted); text-transform:uppercase; letter-spacing:.12em}
  h2{margin:.15rem 0 .35rem; font-size:1.06rem}
  p{margin:.4rem 0 .6rem; color:#e2e8ff}
  button, .btn{
    display:inline-flex; align-items:center; justify-content:center; gap:.5rem;
    padding:12px 14px; border:0; background:var(--accent); color:white; font-weight:700; border-radius:12px; cursor:pointer;
    transition: transform .06s ease, filter .15s ease; text-decoration:none;
  }
  button:active{transform:scale(.98)}
  .subtle{background:#ffffff12}
  .note{font-size:.92rem; color:var(--muted)}
  .reveal{display:none; margin-top:8px; padding:10px 12px; background:#0c1740; border:1px solid #ffffff1a; border-radius:10px}
  .reveal.ok{border-color:#3cffb3}
  /* LOCK */
  .lock{width:var(--card-w); background:var(--panel); border:1px dashed #ffffff33; border-radius:var(--radius); padding:16px; box-shadow:var(--shadow)}
  .digits{display:flex; gap:10px; justify-content:center; margin:10px 0 12px}
  .digits input{
    width:56px; height:64px; text-align:center; font-size:2rem; border-radius:12px; border:1px solid #ffffff1f;
    background:#0d1736; color:var(--fg); outline:none; box-shadow: inset 0 2px 0 #00000044;
  }
  .digits input:focus{border-color:#6f9bff}
  .hint{margin-top:8px; color:var(--muted); text-align:center}
  .error{color:var(--danger); text-align:center; min-height:1.2em; font-weight:600}
  .success{color:var(--success); text-align:center; font-weight:700}
  /* FINAL */
  #final{display:none; width:var(--card-w)}
  video{width:100%; border-radius:16px; background:#0a1330}
  .center{display:flex; justify-content:center; gap:10px}
  /* CONFETTI */
  .confetti{position:fixed; top:-8vh; width:10px; height:14px; transform:rotate(15deg); opacity:.9; z-index:9999; pointer-events:none}
  @keyframes fall { to { transform: translateY(110vh) rotate(360deg);} }
  /* Footer */
  footer{position:fixed; bottom:10px; inset-inline:0; display:grid; place-items:center; opacity:.55; font-size:.82rem}
</style>
</head>
<body>
  <header>
    <div class="hwrap">
      <p class="title">Nuestra mini aventura ‚Ä¢ <strong>Feliz 22</strong> üéÇ</p>
      <div class="progress"><div class="bar" id="bar"></div></div>
    </div>
  </header>

  <main>
    <!-- HITO 1 -->
    <article class="card" data-step="1">
      <div class="media">
        <img src="img/1.jpg" alt="Primer momento juntos">
      </div>
      <div class="content">
        <div class="kicker">Hito 1</div>
        <h2>El primer mate compartido</h2>
        <p>Ese d√≠a dijiste ‚Äúno s√© si me gusta el amargo‚Ä¶‚Äù y ahora sos sommelier de yerba üòÑ</p>
        <button class="subtle" data-reveal="#r1">Ver pista</button>
        <div id="r1" class="reveal ok">Pista: **PRIMER** mate ‚Üí <strong>1</strong></div>
      </div>
    </article>

    <!-- HITO 2 -->
    <article class="card" data-step="2">
      <div class="media">
        <img src="img/2.jpg" alt="Primer viaje juntos">
      </div>
      <div class="content">
        <div class="kicker">Hito 2</div>
        <h2>El primer viaje</h2>
        <p>Valle Grande nos adopt√≥. Spoiler: siempre nos pierde el mismo camino.</p>
        <button class="subtle" data-reveal="#r2">Ver pista</button>
        <div id="r2" class="reveal ok">Pista: **PRIMER** viaje ‚Üí <strong>1</strong></div>
      </div>
    </article>

    <!-- HITO 3 -->
    <article class="card" data-step="3">
      <div class="media">
        <img src="img/3.jpg" alt="Primer concierto juntos">
      </div>
      <div class="content">
        <div class="kicker">Hito 3</div>
        <h2>El primer concierto</h2>
        <p>Bailamos hasta que el bajo se nos qued√≥ pegado en el cuerpo.</p>
        <button class="subtle" data-reveal="#r3">Ver pista</button>
        <div id="r3" class="reveal ok">Pista: **PRIMER** concierto ‚Üí <strong>1</strong></div>
      </div>
    </article>

    <!-- HITO 4 -->
    <article class="card" data-step="4">
      <div class="media">
        <img src="img/4.jpg" alt="Primer beso">
      </div>
      <div class="content">
        <div class="kicker">Hito 4</div>
        <h2>El primer beso</h2>
        <p>Oficialmente: ah√≠ empez√≥ todo ‚ù§Ô∏è</p>
        <button class="subtle" data-reveal="#r4">Ver pista</button>
        <div id="r4" class="reveal ok">Pista: **PRIMER** beso ‚Üí <strong>1</strong></div>
      </div>
    </article>

    <!-- CANDADO -->
    <section class="lock" id="lock">
      <h2 style="margin:0 0 6px">Desbloquear mensaje</h2>
      <p class="note">Sum√° las pistas: cuatro ‚Äúprimeros‚Äù‚Ä¶ ¬øel c√≥digo? üòâ</p>
      <div class="digits" role="group" aria-label="C√≥digo de 4 d√≠gitos">
        <input inputmode="numeric" pattern="[0-9]*" maxlength="1" aria-label="D√≠gito 1" />
        <input inputmode="numeric" pattern="[0-9]*" maxlength="1" aria-label="D√≠gito 2" />
        <input inputmode="numeric" pattern="[0-9]*" maxlength="1" aria-label="D√≠gito 3" />
        <input inputmode="numeric" pattern="[0-9]*" maxlength="1" aria-label="D√≠gito 4" />
      </div>
      <div class="center">
        <button id="check" class="btn">Abrir video</button>
        <button id="reset" class="subtle">Limpiar</button>
      </div>
      <p id="msg" class="error" aria-live="polite"></p>
      <p class="hint">Pista extra: <em>cuatro veces el mismo n√∫mero</em>.</p>
    </section>

    <!-- FINAL -->
    <section id="final">
      <article class="card" style="margin-top:10px">
        <div class="content">
          <div class="kicker">Feliz cumplea√±os #22 üéÇ</div>
          <h2>Para vos, Mar</h2>
          <p>Gracias por todo lo que compartimos. Te quiero. ‚ÄîJ</p>
        </div>
        <div class="content" style="padding-top:0">
          <video id="vid" controls playsinline preload="metadata" poster="img/poster.jpg">
            <source src="video/mensaje.mp4" type="video/mp4">
            Tu navegador no soporta video HTML5.
          </video>
          <div class="center" style="margin-top:10px">
            <a class="subtle btn" href="#" onclick="location.reload();return false;">Volver al inicio</a>
          </div>
        </div>
      </article>
    </section>
  </main>

  <footer>Hecho con amor üíõ</footer>

<script>
  // ===== Config =====
  const CODE = "1111"; // ‚Üê tu c√≥digo

  // ===== Utilidad: progreso al scrollear =====
  const bar = document.getElementById('bar');
  function updateProgress(){
    const cards = [...document.querySelectorAll('.card[data-step]')];
    const seen = cards.filter(c => c.getBoundingClientRect().top < innerHeight*0.6).length;
    const total = cards.length;
    bar.style.width = Math.min((seen/total)*100, 100) + '%';
  }
  addEventListener('scroll', updateProgress, {passive:true});
  addEventListener('load', updateProgress);

  // ===== Mostrar pistas =====
  document.querySelectorAll('[data-reveal]').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const tgt = document.querySelector(btn.dataset.reveal);
      if (tgt) tgt.style.display = 'block';
    });
  });

  // ===== Inputs del candado =====
  const inputs = Array.from(document.querySelectorAll('.digits input'));
  const msg = document.getElementById('msg');
  const lock = document.getElementById('lock');
  const final = document.getElementById('final');
  const btnCheck = document.getElementById('check');
  const btnReset = document.getElementById('reset');

  inputs.forEach((inp, idx)=>{
    inp.addEventListener('input', e=>{
      e.target.value = e.target.value.replace(/\D/g,'').slice(0,1);
      if (e.target.value && idx < inputs.length-1) inputs[idx+1].focus();
    });
    inp.addEventListener('keydown', e=>{
      if (e.key === 'Backspace' && !inp.value && idx>0){ inputs[idx-1].focus(); }
    });
  });

  function codeValue(){ return inputs.map(i=>i.value||'').join(''); }

  btnCheck.addEventListener('click', tryUnlock);
  inputs[inputs.length-1].addEventListener('input', ()=>{
    if (codeValue().length===4) tryUnlock();
  });

  btnReset.addEventListener('click', ()=>{
    inputs.forEach(i=>i.value=''); inputs[0].focus(); msg.textContent='';
  });

  function tryUnlock(){
    const attempt = codeValue();
    if (attempt.length < 4){ msg.textContent = 'Ingres√° los 4 d√≠gitos.'; return; }
    if (attempt === CODE){
      msg.className = 'success'; msg.textContent = '¬°Correcto! Abriendo‚Ä¶';
      celebrate(22); // confetti por el #22
      lock.style.display = 'none';
      final.style.display = 'block';
      setTimeout(()=>document.getElementById('vid')?.scrollIntoView({behavior:'smooth', block:'start'}), 350);
    } else {
      msg.className = 'error';
      msg.textContent = 'Mmm‚Ä¶ no. Pista: cuatro ‚Äúprimeros‚Äù‚Ä¶';
      shake(lock);
    }
  }

  // ===== Mini animaciones =====
  function shake(el){
    el.animate([{transform:'translateX(0)'},{transform:'translateX(-6px)'},{transform:'translateX(6px)'},{transform:'translateX(0)'}], {duration:260, iterations:1});
  }

  function celebrate(n=22){
    for (let i=0;i<n;i++){
      const s = document.createElement('div');
      s.className = 'confetti';
      s.style.left = Math.random()*100 + 'vw';
      s.style.background = `hsl(${Math.floor(Math.random()*360)} 90% 60%)`;
      s.style.animation = `fall ${3+Math.random()*2}s linear forwards`;
      s.style.transform = `rotate(${Math.random()*360}deg)`;
      document.body.appendChild(s);
      setTimeout(()=>s.remove(), 5500);
    }
  }

  // ===== Easter-egg: escribir "MAR" salta al final =====
  let cheat = '';
  window.addEventListener('keydown', e=>{
    cheat = (cheat + e.key.toUpperCase()).slice(-3);
    if (cheat === 'MAR'){ lock.style.display='none'; final.style.display='block'; celebrate(8); }
  });
</script>
</body>
</html>
